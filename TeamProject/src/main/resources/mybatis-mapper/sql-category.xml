<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.TeamProject.mapper.CategoryMapper">
   
    <select id="selectProductList" resultType="com.example.TeamProject.model.Product">
        SELECT 
            P.PRODUCT_NO      AS productNo,
            P.SELLER_ID       AS sellerId,
            P.CATEGORY_NO     AS categoryNo,
            P.PNAME           AS pname,
            P.PINFO			  AS pinfo,
            P.PRICE           AS price,
            P.STOCK           AS stock,
            P.UNIT            AS unit,
            P.PRODUCT_STATUS  AS productStatus,
            TO_CHAR(P.CDATETIME, 'YYYY-MM-DD') AS cdate,
            NVL(IMG.IMAGE_URL, '/resources/img/category/noimage.jpg') AS filePath
        FROM PRODUCT P
        LEFT JOIN PRODUCT_IMAGE IMG
            ON P.PRODUCT_NO = IMG.PRODUCT_NO
        ORDER BY P.PRODUCT_NO
    </select>

   
    <select id="selectCategoryList" resultType="com.example.TeamProject.model.ProductCategory">
        SELECT 
            CATEGORY_NO       AS categoryNo,
            CATEGORY_NAME     AS categoryName,
            NVL(PARENT_CATEGORY_NO, 0) AS parentCategoryNo
        FROM PRODUCT_CATEGORY
        ORDER BY CATEGORY_NO
    </select>

</mapper>