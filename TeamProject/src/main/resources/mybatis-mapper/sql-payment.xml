<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.TeamProject.mapper.PaymentMapper">
	
	<insert id="insertOrder" parameterType="hashmap" useGeneratedKeys="false">
	    <selectKey keyProperty="orderNo" order="BEFORE" resultType="int">
	        SELECT ORDERS_SEQ.NEXTVAL FROM DUAL
	    </selectKey>
	    INSERT INTO ORDERS (
	        ORDER_NO,
	        TOTAL_PRICE,
	        STATUS,
	        RECEIV_NAME,
	        RECEIV_PHONE,
	        DELIVER_ADDR,
	        MEMO,
	        ORDERDATE,
	        UDATETIME,
	        BUYER_ID
	    ) VALUES (
	        #{orderNo},
	        #{totalPrice},
	        #{status},
	        #{receivName},
	        #{receivPhone},
	        #{deliverAddr},
	        #{memo},
	        SYSDATE,
	        SYSDATE,
	        #{buyerId}
	    )
	</insert>
	
	
	<insert id="insertPayment" parameterType="hashmap">
	    INSERT INTO PAYMENT (
	        PAYMENT_NO,
	        ORDER_NO,
	        PAYMENT_METHOD,
	        PAYMENT_STATUS,
	        TRANSACTION_NO,
	        AMOUNT,
	        PAID_AT
	    ) VALUES (
	        PAYMENT_SEQ.NEXTVAL,
	        #{orderNo},
	        #{paymentMethod},
	        #{paymentStatus},
	        #{transactionNo},
	        #{amount},
	        SYSDATE
	    )
	</insert>
	
</mapper>